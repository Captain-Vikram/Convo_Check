# Conversational Agent System Architecture

## System Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER INPUT                              â”‚
â”‚                    "I spent 500 on food"                         â”‚
â”‚                    "How can I save money?"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    CONVERSATION ROUTER                 â”‚
        â”‚  - Analyzes intent                     â”‚
        â”‚  - Routes to appropriate agent         â”‚
        â”‚  - Manages agent switches              â”‚
        â”‚  - Preserves context                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      MILL         â”‚      â”‚     CHATUR      â”‚
    â”‚  (Transaction     â”‚â—„â”€â”€â”€â”€â–ºâ”‚  (Financial     â”‚
    â”‚   Specialist)     â”‚      â”‚    Coach)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                     â”‚
             â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  TOOLS:           â”‚    â”‚  INSIGHTS:      â”‚
    â”‚  â€¢ log_cash_tx    â”‚    â”‚  â€¢ Param habits â”‚
    â”‚  â€¢ query_summary  â”‚    â”‚  â€¢ User goals   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    DEV PIPELINE             â”‚
    â”‚  â†’ transactions.csv         â”‚
    â”‚  â†’ analyst-metadata.csv     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Routing Decision Flow

```
User Input: "I spent 500 on groceries"
    â”‚
    â–¼
[Router analyzes]
    â”‚
    â”œâ”€ Has amount? YES
    â”œâ”€ Transaction keyword? YES (spent)
    â”œâ”€ Advice keyword? NO
    â”‚
    â–¼
Route to: MILL
    â”‚
    â–¼
Mill: "Got it! Logging INR 500 for groceries. âœ¨"
```

```
User Input: "How can I reduce my food expenses?"
    â”‚
    â–¼
[Router analyzes]
    â”‚
    â”œâ”€ Has amount? NO
    â”œâ”€ Transaction keyword? NO
    â”œâ”€ Advice keyword? YES (reduce, expenses)
    â”‚
    â–¼
Route to: CHATUR
    â”‚
    â–¼
Chatur: "Let's work on that! What's your weekly food budget? ğŸ’¡"
```

## Agent Escalation Flow

### Mill â†’ Chatur Escalation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User with MILL                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User: "I spent 500 on food"                     â”‚
â”‚ Mill: "Logged! âœ¨"                              â”‚
â”‚                                                 â”‚
â”‚ User: "Is that too much? Should I reduce it?"  â”‚
â”‚ Mill: [Detects advice request]                 â”‚
â”‚       "Great question! Let me connect you      â”‚
â”‚        with Chatur for advice. ğŸ’¡"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        [Escalation occurs]
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User now with CHATUR                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chatur: "Hi! I'm Chatur. Let's analyze your    â”‚
â”‚          food spending. What's your typical     â”‚
â”‚          weekly amount?"                        â”‚
â”‚                                                 â”‚
â”‚ User: "Around 2000 per week"                    â”‚
â”‚ Chatur: "That's INR 8000/month. Let's create   â”‚
â”‚          a plan to reduce it..."                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Chatur â†’ Mill Escalation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User with CHATUR                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User: "Help me budget my income"                â”‚
â”‚ Chatur: "Great! What's your monthly income? ğŸ’¡" â”‚
â”‚                                                 â”‚
â”‚ User: "I just got paid 25000 today"            â”‚
â”‚ Chatur: [Detects transaction mention]          â”‚
â”‚         "Let me connect you with Mill to log   â”‚
â”‚          that first. ğŸ“"                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        [Escalation occurs]
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User now with MILL                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mill: "Perfect! INR 25000 income. Let me log   â”‚
â”‚        that. âœ¨ [Transaction saved]"            â”‚
â”‚                                                 â”‚
â”‚ Mill: "All set! Going back to Chatur for       â”‚
â”‚        your budgeting session."                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        [Return to Chatur]
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User back with CHATUR                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chatur: "Great! With INR 25000/month, let's    â”‚
â”‚          allocate: 50% needs, 30% wants,       â”‚
â”‚          20% savings..."                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Conversation State Machine

### Mill's States

```
START
  â”‚
  â–¼
DETECTING_INTENT â”€â”€â”€â”
  â”‚                 â”‚
  â”œâ”€ logging â”€â”€â”€â”€â”€â”€â”€â”¤
  â”œâ”€ query â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”œâ”€ advice â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º ESCALATE_TO_CHATUR
  â””â”€ unclear â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
COLLECTING_INFO
  â”‚
  â”œâ”€ Has amount? NO â”€â”€â–º ASK_FOR_AMOUNT
  â”œâ”€ Has desc? NO â”€â”€â”€â”€â–º ASK_FOR_DESCRIPTION
  â””â”€ Complete? YES â”€â”€â”€â–º EXECUTE_ACTION
                          â”‚
                          â–¼
                        DONE
```

### Chatur's States

```
START
  â”‚
  â–¼
DETECTING_GOAL
  â”‚
  â”œâ”€ Save money
  â”œâ”€ Reduce spending
  â”œâ”€ Budget planning
  â””â”€ General advice
  â”‚
  â–¼
GATHERING_CONTEXT (Turn 1-3)
  â”‚
  â”œâ”€ What's the problem?
  â”œâ”€ What's the goal?
  â”œâ”€ What are constraints?
  â”‚
  â”œâ”€ User mentions transaction? â”€â”€â–º ESCALATE_TO_MILL
  â”‚
  â–¼
PROVIDING_GUIDANCE (Turn 4)
  â”‚
  â””â”€â–º DONE (with final action plan)
```

## Data Flow with Conversations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User speaks to Router                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Router analyzes & routes to Mill/Chatur      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3a. MILL    â”‚    â”‚ 3b. CHATUR   â”‚
â”‚ - Extracts  â”‚    â”‚ - Asks about â”‚
â”‚   tx detailsâ”‚    â”‚   goals      â”‚
â”‚ - Multi-turnâ”‚    â”‚ - Multi-turn â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â”‚                  â–¼
       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚           â”‚ 4b. Reads    â”‚
       â”‚           â”‚ Param habits â”‚
       â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5a. Mill calls Dev pipeline     â”‚
â”‚     â†’ transactions.csv           â”‚
â”‚     â†’ analyst-metadata.csv       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Param runs analysis          â”‚
â”‚    â†’ habits.csv                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Chatur generates guidance    â”‚
â”‚    â†’ coach-briefings.json       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Keyword Routing Matrix

| User Input Contains          | Agent  | Reason             |
| ---------------------------- | ------ | ------------------ |
| Amount (500, 1000)           | Mill   | Transaction likely |
| "spent", "paid", "bought"    | Mill   | Transaction verbs  |
| "show", "how much", "total"  | Mill   | Data query         |
| "advice", "tip", "help me"   | Chatur | Seeking guidance   |
| "should I", "what to do"     | Chatur | Decision support   |
| "goal", "save", "reduce"     | Chatur | Goal-oriented      |
| "budget", "plan", "strategy" | Chatur | Planning needed    |
| Ambiguous                    | None   | Let user choose    |

## Session Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConversationRouter maintains:              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Map<userId, {                               â”‚
â”‚   activeAgent: "mill" | "chatur",          â”‚
â”‚   millSessionId?: string,                  â”‚
â”‚   chaturSessionId?: string,                â”‚
â”‚   conversationHistory: [                   â”‚
â”‚     {                                       â”‚
â”‚       agent: "mill",                       â”‚
â”‚       userMsg: "I spent 500",              â”‚
â”‚       agentMsg: "Logging...",              â”‚
â”‚       timestamp: "2025-10-18T12:00:00Z"    â”‚
â”‚     },                                      â”‚
â”‚     ...                                     â”‚
â”‚   ]                                         â”‚
â”‚ }>                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Characteristics

```
Operation Timeline:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User Input                                    [0ms]
  â”‚
  â–¼
Router Keyword Analysis                      [1ms]
  â”‚
  â”œâ”€ Cache hit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º       [1ms]
  â”‚
  â””â”€ LLM call â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º     [500ms]
      â”‚
      â–¼
Agent Selection                              [1ms]
  â”‚
  â–¼
Agent LLM Call                            [1000ms]
  â”‚
  â–¼
Response to User                          [1002ms]

Total: ~1-1.5 seconds (with LLM)
Total: ~50ms (with caching)
```

## Error Handling Flow

```
User Input
  â”‚
  â–¼
Router
  â”‚
  â”œâ”€ LLM fails? â”€â”€â–º Keyword fallback â”€â”€â”€â”€â”€â–º Agent
  â”‚
  â–¼
Agent
  â”‚
  â”œâ”€ LLM fails? â”€â”€â–º Rule-based response â”€â”€â–º User
  â”‚
  â”œâ”€ Tool fails? â”€â–º Retry (3x) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User
  â”‚
  â””â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User

All paths lead to user response (graceful degradation)
```

## Monitoring Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Track these metrics:                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Agent selection accuracy                  â”‚
â”‚    - Mill vs Chatur routing correctness      â”‚
â”‚                                              â”‚
â”‚ 2. Escalation frequency                      â”‚
â”‚    - How often agents hand off              â”‚
â”‚                                              â”‚
â”‚ 3. Conversation length                       â”‚
â”‚    - Average turns per conversation          â”‚
â”‚                                              â”‚
â”‚ 4. Completion rate                           â”‚
â”‚    - % of conversations that complete        â”‚
â”‚                                              â”‚
â”‚ 5. LLM fallback rate                         â”‚
â”‚    - % using keyword-based routing           â”‚
â”‚                                              â”‚
â”‚ 6. Response latency                          â”‚
â”‚    - P50, P95, P99 response times           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Summary

This architecture achieves:

âœ… **Clear Separation**: Mill handles transactions, Chatur handles advice  
âœ… **Intelligent Routing**: System decides which agent based on intent  
âœ… **Seamless Handoffs**: Agents collaborate without user confusion  
âœ… **Graceful Degradation**: Fallbacks at every layer  
âœ… **Observable**: Full conversation history tracked  
âœ… **Scalable**: Easy to add more specialized agents

Perfect for production deployment! ğŸš€
